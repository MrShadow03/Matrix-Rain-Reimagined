function livelyPropertyListener(e,a){switch(e){case"textSize":fontSize=a,columns=canvas.width/fontSize;break;case"fontFamily":font=a;break;case"fallingDelay":delay=a,timeoutId&&(clearTimeout(timeoutId),draw());break;case"rainingCharacters":letters=a.split("");break;case"rainingCharactersColor":primaryColor=a;break;case"specialCharacters":specialLetters=a.split("");break;case"specialCharactersColor":secondaryColor=a;break;case"isRainbowEnabled":isRainbowEnabled=a;break;case"color1":rainbowColors[0]=a;break;case"color2":rainbowColors[1]=a;break;case"color3":rainbowColors[2]=a;break;case"color4":rainbowColors[3]=a;break;case"color5":rainbowColors[4]=a;break;case"color6":rainbowColors[5]=a;break;case"color7":rainbowColors[6]=a}}function draw(){ctx.fillStyle="rgba(0, 0, 0, 0.1)",ctx.fillRect(0,0,canvas.width,canvas.height);for(var e=0;e<drops.length;e++){var a=letters[Math.floor(Math.random()*letters.length)];a=a||"v",ctx.fillStyle=primaryColor,specialLetters.includes(a)&&(ctx.fillStyle=secondaryColor),isRainbowEnabled&&(ctx.fillStyle=rainbowColors[rainbowIndex],rainbowIndex=(rainbowIndex+1)%rainbowColors.length),ctx.font=fontSize+"px "+font,ctx.fillText(a,e*fontSize,drops[e]*fontSize),drops[e]++,drops[e]*fontSize>canvas.height&&Math.random()>.95&&(drops[e]=0)}timeoutId=setTimeout(draw,parseInt(delay))}var canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight;var letters="ネバーゴナーギブユーアップ1234";letters=letters.replace(" ",""),letters=letters.split("");var specialLetters="ッ12";specialLetters=specialLetters.replace(" ",""),specialLetters=specialLetters.split("");for(var fontSize=14,columns=canvas.width/fontSize,drops=[],i=0;i<columns;i++)drops[i]=1;var timeoutId,primaryColor="#00ff00",secondaryColor="#ff0000",backgroundColor="#0fff00",delay=40,font="Arial",isRainbowEnabled=!1,rainbowColors=["#ff0000","#ff7f00","#ffff00","#00ff00","#0000ff","#4b0082","#9400d3"];rainbowIndex=0,draw();